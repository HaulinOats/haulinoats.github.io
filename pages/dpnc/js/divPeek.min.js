//DivPeek - Custom jQuery CSS3 Animation Trigger Script by David Halford
//(see https://github.com/davidhalford/DivPeek)
//===============================================================================
//CONFIG: 
var elementsToTrack = ["#hc_provider_main_0","#hc_provider_main_1","#hc_provider_main_2"];

// var window_width = $(window).width();
var pixelOffset = -400;
var inClassName = "inViewPort";
var outClassName = "outViewPort";
//===============================================================================

//add function to see of elements exist (otherwise removing an elemnet from DOM but not from array breaks everything)
jQuery.fn.exists = function(){return this.length>0;}

//define vars out of scope
var viewPortWidth = $(window).width();
var scrollFromLeft = $(window).scrollLeft();
var scrollFromRight = (parseInt(scrollFromLeft)+parseInt(viewPortWidth));

//function for recalculating all positioning vars in scroll/resize
function recalcVars(){
  viewPortWidth = $(window).width();
  scrollFromLeft = $(window).scrollLeft();
  scrollFromRight = (parseInt(scrollFromLeft)+parseInt(viewPortWidth));
  for (var i = 0; i < elementsToTrack.length; i++) {
    if ($(elementsToTrack[i]).exists()) {
      checkInViewport(scrollFromRight, elementsToTrack[i]);
    }
    }
}

//catch window events
$(window).resize(function(e){recalcVars();});
document.addEventListener("touchmove", ScrollStart, false);
document.addEventListener("scroll", Scroll, false);
function ScrollStart(){recalcVars();}
function Scroll(){recalcVars();}

//function that handles if an element is in the viewport or not 
function checkInViewport(scrollRight, domElement){
  var elementPos = $(domElement).offset().left;
  if((parseInt(scrollRight)+parseInt(pixelOffset)) > elementPos){
    $(domElement).addClass(inClassName).removeClass(outClassName);
  } else {
    $(domElement).removeClass(inClassName).addClass(outClassName);
  }
}